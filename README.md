# MInato-ai
Minato.ai the ultime ai companion

## XML-Structured Planning and Parallel Tool Execution

Minato now supports advanced orchestration with XML-structured planning and parallel tool execution capabilities.

### Key Features

1. **XML-Structured Planning**: 
   - Creates detailed, structured plans for complex user requests
   - Plans are structured in XML format for easy parsing and validation
   - Includes steps, dependencies, and execution order

2. **Dynamic Plan Verification**:
   - Validates plans against core objectives and directives
   - Identifies and corrects issues before execution
   - Provides suggestions for plan improvements

3. **Advanced NLU & Intent Disambiguation**:
   - Understands core request intent beyond surface-level queries
   - Resolves ambiguity (e.g., "no these I want others") using conversation history
   - Identifies entities, sentiment, and implicit needs
   - Accesses user preferences and memory for contextual understanding

4. **Query Classification**:
   - Analyzes the nature of user queries to determine optimal processing approach
   - Categorizes queries for appropriate response handling
   - Identifies parallel execution opportunities

5. **Parallel Tool Execution**:
   - Automatically identifies steps that can run in parallel
   - Groups independent steps for simultaneous execution
   - Maintains proper dependency ordering

### Configuration

The enhanced orchestration system is enabled by default. You can control this with the following configuration options in your environment:

```env
# Enable XML planning and parallel tool execution (default: true)
USE_ENHANCED_ORCHESTRATION=true

# Enable dynamic personalization for text messages (default: true)
USE_DYNAMIC_PERSONALIZATION=true

# Enable dynamic personalization for audio messages (default: false)
USE_DYNAMIC_PERSONALIZATION_AUDIO=false
```

### Implementation Details

The system is implemented across several files:

- `lib/prompts.ts`: Contains the XML-structured prompt templates and NLU disambiguation prompts

- `lib/types/index.ts`: Contains TypeScript interfaces for the XML planning system and NLU types
- `lib/core/orchestrator.ts`: Implements the orchestration methods
- `lib/core/nlu-disambiguation.ts`: Implements the NLU disambiguation system
- `lib/core/orchestration-helpers.ts`: Provides utility functions for the orchestration system
- `lib/core/runEnhancedOrchestration.ts`: Integrates NLU with parallel execution
- `lib/core/helpers.ts`: Common utility functions
- `lib/config.ts`: Contains configuration options

This implementation significantly improves Minato's ability to handle complex user requests efficiently.

## Key Features

### XML-Structured Planning
Minato uses XML-structured planning to break down complex tasks into clear, actionable steps. This approach enables:
- Explicit reasoning about the user's request
- Step-by-step action planning
- Self-verification and error correction
- Systematic approach to problem-solving

### Dynamic Verification
Plans generated by Minato undergo verification to catch and correct issues:
- Tool selection validation
- Argument completeness checks
- Logical sequence validation
- Detection of redundant or unnecessary steps

### NLU & Intent Disambiguation
Minato includes a sophisticated Natural Language Understanding system for resolving ambiguities in user queries:
- **Entity Recognition & Linking**: Identifies named entities (people, places, objects, dates) and links them to known concepts or previous mentions
- **Co-reference Resolution**: Understands pronouns and references like "it", "that", "these", "those", etc.
- **Ambiguity Resolution**: When a query is vague, uses context to determine the most likely meaning
- **Implicit Need Identification**: Identifies what the user needs but hasn't explicitly stated
- **Conversation History Integration**: Effectively uses prior turns to understand context-dependent requests
- **Query Reformulation**: Rewrites ambiguous queries with all references clearly resolved

### Query Classification
Minato classifies user queries to determine the optimal processing approach:
- Direct response queries (simple facts, greetings)
- Tool execution queries (specific tool requests)
- Multi-step workflow queries (complex tasks)
- Ambiguous queries requiring clarification

### Parallel Tool Execution
For efficiency, Minato can execute independent tool calls in parallel:
- Dynamic dependency analysis
- Concurrent execution planning
- Result aggregation
- Optimal tool sequencing
